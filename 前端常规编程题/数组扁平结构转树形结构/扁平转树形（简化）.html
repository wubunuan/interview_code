<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        var arr = [{ id: 1, pid: 0, name: '沃尔玛' },
        { id: 2, pid: 0, name: '生鲜区' },
        { id: 3, pid: 1, name: '日用品区' },
        { id: 4, pid: 2, name: '鱼' },
        { id: 5, pid: 2, name: '牛肉' },
        { id: 6, pid: 13, name: '卫生纸' },
        { id: 7, pid: 3, name: '牙刷' },
        { id: 8, pid: 7, name: '电动牙刷' },
        { id: 9, pid: 7, name: '普通牙刷' }];
        var treeArr = getTreeArr(arr);
        console.log(treeArr);

        function getTreeArr(arr){
            const res = [];
            let map = new Map();
            for(let i = 0; i < arr.length; ++i){
                let pid = arr[i].pid;
                if(!map.has(pid) && pid == 0){
                    res.push(arr[i]);
                    map.set(arr[i].id, arr[i]);
                }else if(map.has(pid)){
                    if(!map.get(pid).children){
                        map.get(pid).children = [];
                    }
                    map.get(pid).children.push(arr[i]);
                    map.set(arr[i].id, arr[i]);
                }
            }
            return res;
        }

        
    </script>
</body>

</html>